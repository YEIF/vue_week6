"use strict";(self["webpackChunkvue_week6"]=self["webpackChunkvue_week6"]||[]).push([[963],{1530:function(e,t,a){function n(e){return{all:e=e||new Map,on:function(t,a){var n=e.get(t);n?n.push(a):e.set(t,[a])},off:function(t,a){var n=e.get(t);n&&(a?n.splice(n.indexOf(a)>>>0,1):e.set(t,[]))},emit:function(t,a){var n=e.get(t);n&&n.slice().map((function(e){e(a)})),(n=e.get("*"))&&n.slice().map((function(e){e(t,a)}))}}}a.d(t,{Z:function(){return s}});const i=n();var s=i},5963:function(e,t,a){a.r(t),a.d(t,{default:function(){return Y}});var n=a(6252),i=a(3577);const s=(0,n._)("h2",null,"產品列表",-1),o={class:"container"},l={class:"mt-4"},c={class:"table align-middle"},r=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"圖片"),(0,n._)("th",null,"商品名稱"),(0,n._)("th",null,"價格"),(0,n._)("th")])],-1),g={style:{width:"200px"}},p={key:0,class:"h5"},u={key:1,class:"h6"},d={key:2,class:"h5"},h={class:"btn-group btn-group-sm"},_=(0,n.Uk)(" 查看更多 "),k=["onClick"],m={key:0,class:"fas fa-spinner fa-pulse"},v=(0,n.Uk)(" 加到購物車 ");function f(e,t,a,f,w,b){const C=(0,n.up)("router-link"),y=(0,n.up)("pagination-componet");return(0,n.wg)(),(0,n.iD)(n.HY,null,[s,(0,n._)("div",o,[(0,n._)("div",l,[(0,n._)("table",c,[r,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(w.products,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e.id},[(0,n._)("td",g,[(0,n._)("div",{style:(0,i.j5)([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),(0,n._)("td",null,(0,i.zw)(e.title),1),(0,n._)("td",null,[e.price?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",p,(0,i.zw)(e.origin_price)+" 元",1)),e.price?((0,n.wg)(),(0,n.iD)("del",u,"原價 "+(0,i.zw)(e.origin_price)+" 元",1)):(0,n.kq)("",!0),e.price?((0,n.wg)(),(0,n.iD)("div",d,"現在只要 "+(0,i.zw)(e.price)+" 元",1)):(0,n.kq)("",!0)]),(0,n._)("td",null,[(0,n._)("div",h,[(0,n.Wm)(C,{to:`/product/${e.id}`,class:"btn btn-primary"},{default:(0,n.w5)((()=>[_])),_:2},1032,["to"]),(0,n._)("button",{type:"button",class:"btn btn-outline-danger",onClick:t=>b.addToCart(e.id)},[w.isLoadingItem===e.id?((0,n.wg)(),(0,n.iD)("i",m)):(0,n.kq)("",!0),v],8,k)])])])))),128))])]),(0,n.Wm)(y,{pages:w.pagination,onChangePages:b.getProducts},null,8,["pages","onChangePages"])])])],64)}var w=a(1530),b=a(9963);const C={"aria-label":"Page navigation example"},y={class:"pagination"},P=(0,n._)("span",{"aria-hidden":"true"},"«",-1),D=[P],x=["onClick"],z=(0,n._)("span",{"aria-hidden":"true"},"»",-1),I=[z];function $(e,t,a,s,o,l){return(0,n.wg)(),(0,n.iD)("nav",C,[(0,n._)("ul",y,[(0,n._)("li",{class:(0,i.C_)(["page-item",{disabled:!a.pages.has_pre}])},[(0,n._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,b.iM)((e=>l.changePages(a.pages.current_page-1)),["prevent"]))},D)],2),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.pages.total_pages,(e=>((0,n.wg)(),(0,n.iD)("li",{class:(0,i.C_)(["page-item",{active:e===a.pages.current_page}]),key:e+123},[(0,n._)("a",{class:"page-link",href:"#",onClick:(0,b.iM)((t=>l.changePages(e)),["prevent"])},(0,i.zw)(e),9,x)],2)))),128)),(0,n._)("li",{class:(0,i.C_)(["page-item",{disabled:!a.pages.has_next}])},[(0,n._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,b.iM)((e=>l.changePages(a.pages.current_page+1)),["prevent"]))},I)],2)])])}var q={props:["pages"],methods:{changePages(e){this.$emit("change-pages",e)}}},L=a(3744);const M=(0,L.Z)(q,[["render",$]]);var Z=M,H={data(){return{products:[],pagination:{},isLoadingItem:!1,loadingStatus:{loadingItem:""}}},components:{PaginationComponet:Z},methods:{getProducts(e=1){this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/clothes/products/?page=${e}`).then((e=>{this.products=e.data.products,this.pagination=e.data.pagination})).catch((e=>{console.dir(e)}))},addToCart(e,t=1){const a={product_id:e,qty:t};this.isLoadingItem=e;const n="https://vue3-course-api.hexschool.io/v2/api/clothes/cart/";this.$http.post(n,{data:a}).then((e=>{this.isLoadingItem="",w.Z.emit("get-cart-num")})).catch((e=>{console.dir(e)}))}},mounted(){this.getProducts()}};const U=(0,L.Z)(H,[["render",f]]);var Y=U}}]);
//# sourceMappingURL=963.6b4448f6.js.map